{% extends "_indicator.html" %}
{% load static thumbnail chartit %}
{% load humanize %}
{% load core_extras %}
{% load mathfilters %}
{% block indicator_subtitle %}
    Inversi&oacute;n
{% endblock %}

{% block charts %}
    <div class="col-lg-12 col-md-12 col-sm-12">
        <div role="tabpanel">
            <div class="row">
                <!-- Nav tabs -->
                <div class="chart-update col-lg-1 col-md-1 col-sm-1 col-xs-1 mt-0">
                    <ul class="nav nav-tabs tabs-left sideways" role="tablist">
                        <li class="active">
                            <a href="#icons" aria-controls="icons" role="tab"
                               data-toggle="tab">
                                  <span class="pma-icon pe-7s-info pma-fg-gray"
                                        aria-hidden="true" id="chart-bubble-1"
                                        data-chartcontainer="bubble-1">
                                  </span>
                            </a>
                        </li>
                        <li>
                            <a href="#pie" aria-controls="pie" role="tab"
                               data-toggle="tab">
                                <span id="chart-pie-1"
                                      class="pma-icon pe-7s-graph pma-fg-gray"
                                      data-chartcontainer="pie">
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="#bar" aria-controls="bar" role="tab" data-toggle="tab">
                                 <span id="chart-bar-1"
                                       class="pma-icon pe-7s-graph3 pma-fg-gray"
                                       data-chartcontainer="bar">
                                 </span>
                            </a>
                        </li>
                        <li>
                            <a href="#table_" aria-controls="table_" role="tab" data-toggle="tab">
                                    <span id="table"
                                          class="pma-icon fa fa-table pma-fg-gray"
                                          data-chartcontainer="table">
                                    </span>
                            </a>
                        </li>
                    </ul>
                </div>
                <div class="col-lg-10 col-md-10 col-sm-11 col-xs-11">
                    <!-- Tab panes -->
                    <div class="tab-content">
                        <div class="tab-pane pma-summary pma-index-inversion-icons active" id="icons">
                            <div class="row categorias_inversion">
                                <div class="col-xs-12 col-sm-12 col-md-12">
                                    {% for i in bubble_data_nojson.children %}
                                        <div class="icons-inversion col-xs-6 col-sm-2 col-md-2 text-center height-categoria">
                                            <a href="/core/plan-de-inversion?inversion__anio={{ year }}&inversion__periodo={{ periodo }}&catinversion={{ i.name }}"
                                               class="font-color-celeste">
                                                <span class="info-box-icon pma-icon {{ i.slug }}"></span>
                                            </a>
                                            <h5 class="text-center">
                                                <a href="/core/plan-de-inversion?inversion__anio={{ year }}&inversion__periodo={{ periodo }}&catinversion={{ i.name }}"
                                                   class="font-color-celeste">
                                                    <strong>{{ i.label }}</strong>
                                                </a>
                                                <br/>
                                                <span class="font-17px">{{ i.amount }}</span>
                                            </h5>
                                        </div>
                                    {% endfor %}
                                </div>
                            </div>
                        </div>
                        <div class="tab-pane" id="pie">
                            <div id="pie" class="view-alternative"> Chart will be rendered here</div>
                        </div>
                        <div class="tab-pane" id="bar">
                            <div id="bar" class="view-alternative"> Chart will be rendered here</div>
                        </div>
                        <div class="tab-pane" id="table_">
                            <table class="table table-bordered table-striped table-hover">
                                <thead>
                                <tr class="bg-primary">
                                    <th rowspan="2" colspan="1">Grupo</th>
                                    {% if periodo_list|keyvalue:year == 'I' %}
                                        <th rowspan="1" colspan="2" class="text-center no-border-bottom">Inicial</th>
                                    {% else %}
                                        <th rowspan="1" colspan="2" class="text-center no-border-bottom">Ejecutado</th>
                                    {% endif %}
                                </tr>
                                <tr class="bg-primary">
                                    <th rowspan="1" colspan="1" class="text-center no-border-top no-border-right">M. de
                                        C&oacute;rdobas
                                    </th>
                                    <th rowspan="1" colspan="1" class="text-center no-border-top no-border-left">%</th>
                                </tr>
                                </thead>
                                <tbody>
                                {% for row in cat %}
                                    <tr>
                                        <td colspan="1" class="text-left">{{ row.catinversion__nombre }}</td>
                                        {% if periodo_list|keyvalue:year == 'I' %}
                                            <td colspan="1"
                                                class="text-center">{{ row.inicial_asignado|million|intcomma }}</td>
                                            <td colspan="1" class="text-center">{{ row.ini_asig_porcentaje }}%</td>
                                        {% else %}
                                            <td colspan="1"
                                                class="text-center">{{ row.ejecutado|million|intcomma }}</td>
                                            <td colspan="1" class="text-center">{{ row.ejec_porcentaje }}%</td>
                                        {% endif %}
                                    </tr>
                                {% endfor %}
                                <tr class="">
                                    <td colspan="1">TOTAL</td>
                                    {% if periodo_list|keyvalue:year == 'I' %}
                                        <td colspan="1" class="text-center">{{ asignado|million|intcomma }}</td>
                                        <td colspan="1" class="text-center">{{ asignado_porcentaje }}%</td>
                                    {% else %}
                                        <td colspan="1"
                                            class="text-center">{{ ejecutado|million|intcomma|default:"0" }}</td>
                                        <td colspan="1" class="text-center">{{ ejecutado_porcentaje }}%</td>
                                    {% endif %}
                                </tr>
                                </tbody>
                                <tfoot class="font-12px font-color-azul">
                                <th colspan="{{ year_list|length }}" rowspan="1" class="text-justify">
                                    <strong>Fuente: </strong>Elaboraci&oacute;n
                                    propia a partir
                                    de transmunic.gob.ni<strong>.</strong></th>
                                </tfoot>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

{% endblock %}

{% block main_table %}

{% endblock %}

{% block section2 %}
    {% if not municipio %}
        <div class="loaded">
            <div class="container">
                <div class="row">
                    <div class="col-lg-6 col-md-6 col-sm-12">
                        <h2><strong>Ranking de municipio </strong>de misma categor&iacute;a municipal</h2>
                        <h5>C&oacute;rdobas corrientes por habitante {% if periodo_list|keyvalue:year == 'I' %}en base a
                            ingresos asignados{% else %} en base a ingresos ejecutados{% endif %}</h5>
                        <hr class="pma-line-3"/>
                        {% include 'ranking_categoria.html' %}
                    </div>
                    {# chart horizontal chart #}
                    <div class="col-lg-6 col-md-6 col-sm-12 mt-1 height-horizontal-bar">
                        <div id="bar_horizontal" class="view-alternative"> Barra Horizontal
                        </div>
                    </div>
                </div>
            </div>

            <div class="events-content container text-center">
                <ol>
                    {% for row in porclasep %}
                        <li{% if forloop.first %} class="selected"{% endif %}
                                                  data-date="{% now "SHORT_DATETIME_FORMAT" %} 00:{{ forloop.counter }}">
                            <!--
           <h4>{{ row.clasificacion }}</h4>
        -->
                        </li>
                    {% endfor %}
                </ol>
            </div> <!-- .events-content -->

            <div class="container">
                <div class="row">
                    <div class="col-md-12 medium text-center">
                        <button id="show-detail-1" class="blanco btn pma-bg-blue more" type="submit">
                            Ver detalles en tabla
                        </button>
                    </div>
                </div>
            </div>
            <div class="container" id="detail-1">
                <div class="row">
                    <div class="col-md-offset-4 col-md-4 table-responsive">
                        <table class="table table-bordered">
                            <thead>
                            <tr class="blanco pma-bg-blue">
                                <th>Categor&iacute;a de municipio</th>
                                <th>Asignado</th>
                                <th>Ejecutado</th>
                            </tr>
                            </thead>
                            <tbody>
                            {% for row in porclasep %}
                                <tr class="pma-bg-white">
                                    <td>{{ row.clasificacion }}</td>
                                    <td class="tex-center">
                                        {% if row.asignado %}
                                            {{ row.asignado|floatformat:2 }}
                                        {% else %}
                                            0
                                        {% endif %}
                                    </td>
                                    <td class="text-right">
                                        {% if row.ejecutado %}
                                            {{ row.ejecutado|floatformat:2 }}
                                        {% else %}
                                            0
                                        {% endif %}
                                    </td>
                                </tr>
                            {% endfor %}
                            <tr class="pma-bg-white">
                                <td><strong>TOTAL</strong></td>
                                <td class="text-right">
                                    <strong>{{ porclasep|total_sum:'asignado'|floatformat:2 }}</strong></td>
                                <td class="text-right">
                                    <strong>{{ porclasep|total_sum:'ejecutado'|floatformat:2 }}</strong></td>
                            </tr>
                            </tbody>
                            <tfoot class="font-12px font-color-azul">
                            <th colspan="{{ year_list|length }}" rowspan="1" class="text-justify pma-bg-white">
                                <strong>Fuente: </strong>Elaboraci&oacute;n
                                propia a partir
                                de transmunic.gob.ni<strong>.</strong></th>
                            </tfoot>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    {% endif %}
    {% if municipio %}
        <div class="loaded">
            <div class="container">
                <div class="row">
                    <div class="col-lg-12 col-md-12 col-sm-12">
                        <h2>
                            <strong>Ranking de municipio</strong>
                            de misma categor&iacute;a municipal
                        </h2>
                        <h4>
                            C&oacute;rdobas corrientes por habitante
                            {% if municipio|lower == 'managua' %}
                                para el municipio de
                                <strong>{{ municipio }}</strong>
                                con
                                {% if periodo_list|keyvalue:year == 'I' %}
                                    {{ otros.0.asignado_percent|intcomma }}
                                {% else %}
                                    {{ otros.0.ejecutado_percent|intcomma }}
                                {% endif %}
                                Cordobas.
                            {% endif %}
                        </h4>
                        <hr class="pma-line-3"/>
                        {% if municipio|lower != 'managua' %}
                            {% include 'municipal-triangle.html' %}
                        {% endif %}
                    </div>
                </div>
            </div>

            <div class="events-content container text-center">
                <ol>
                    {% for row in otros|dictsortreversed:"asignado_percent" %}
                        <li{% if municipio.slug == row.inversion__municipio__slug %} class="selected"{% endif %}
                                                                                     data-date="{% now "SHORT_DATETIME_FORMAT" %} 00:{{ forloop.counter }}">
                            <!-- <h4>{{ row.inversion__municipio__nombre }}</h4>
        <span> Asignado: {{ row.asignado_percent|intcomma }}
        </span><br/>
        <span> Ejecutado: {{ row.asignado_percent|intcomma }}</span> -->
                        </li>
                    {% endfor %}
                </ol>
            </div> <!-- .events-content -->
            {% if municipio|lower != 'managua' %}
                <div class="container">
                    <div class="row">
                        <div class="col-md-12 text-center medium">
                            <button id="show-detail-1" class="blanco btn pma-bg-blue more" type="submit">
                                Ver detalles en tabla
                            </button>
                        </div>
                    </div>
                </div>
                <div id="detail-1" class="container">
                    <div class="row">
                        <div class="col-md-offset-3 col-md-6 table-responsive">
                            <table class="table table-bordered table-condensed table-striped pma-bg-white">
                                <thead class="thead-inverse">
                                <tr class="bg-primary">
                                    <th class="text-center">
                                        <strong>Posici&oacute;n {{ periodo_list }}</strong>
                                    </th>
                                    <th class="text-center">
                                        <strong>Municipios</strong>
                                    </th>
                                    {% if periodo_list|keyvalue:year == 'I' %}
                                        <th class="text-center"><strong>P. Inicial</strong></th>
                                    {% else %}
                                        <th class="text-center"><strong>Ejecuci&oacute;n</strong></th>
                                    {% endif %}
                                </tr>
                                </thead>
                                <tbody>
                                {% if ejecutado <= 0 %}
                                    {% for row in otros|dictsortreversed:"asignado_percent" %}
                                        <tr {% if municipio.slug == row.inversion__municipio__slug %}class="info"{% endif %}>
                                            <td class="text-center"> {{ forloop.counter }} </td>
                                            <td>{{ row.inversion__municipio__nombre }}</td>
                                            {% if row.inversion__periodo == 'I' %}
                                                <td class="text-center">{{ row.asignado_percent|intcomma }}</td>
                                            {% else %}
                                                <td class="text-center">{{ row.ejecutado_percent|intcomma }}</td>
                                            {% endif %}
                                        </tr>
                                    {% endfor %}
                                {% else %}
                                    {% for row in otros %}
                                        <tr {% if municipio.slug == row.inversion__municipio__slug %}class="info"{% endif %}>
                                            <td class="text-center"> {{ forloop.counter }} </td>
                                            <td>{{ row.inversion__municipio__nombre }}</td>
                                            {% if row.ingreso__periodo == 'I' %}
                                                <td class="text-center">{{ row.asignado_percent|intcomma }}</td>
                                            {% else %}
                                                <td class="text-center">{{ row.ejecutado_percent|intcomma }}</td>
                                            {% endif %}
                                        </tr>
                                    {% endfor %}
                                {% endif %}
                                </tbody>
                                <tfoot class="font-12px font-color-azul">
                                <th colspan="{{ year_list|length }}" rowspan="1" class="text-justify">
                                    <strong>Fuente: </strong>Elaboraci&oacute;n
                                    propia a partir
                                    de transmunic.gob.ni<strong>.</strong></th>
                                </tfoot>
                                {% comment %}
                            <tfoot>
                            <tr class="">
                                <td colspan="2">TOTAL</td>
                                {% if numerador > 0 %}
                                    <td class="text-right">
                                        {% with numerator=otros|total_sum:'asignado' denominator=otros|total_sum:'poblacion' %}
                                            {{ numerator|div:denominator|floatformat:2|intcomma }} {% endwith %}
                                    </td>
                                {% else %}
                                    <td class="text-right">0</td>
                                {% endif %}
                                {% if denominador > 0 and year != '2016' %}
                                    <td class="text-right">
                                        {% with numerator=otros|total_sum:'ejecutado' denominator=otros|total_sum:'poblacion' %}
                                            {{ numerator|div:denominator|floatformat:2|intcomma }} {% endwith %}
                                    </td>
                                {% endif %}
                            </tr>
                            </tfoot>
                            {% endcomment %}
                            </table>
                        </div>
                    </div>
                </div>
            {% endif %}
        </div>
    {% endif %}
{% endblock %}

{% block section4 %}
    <div class="container wide">
        <div class="row">
            <div class="col-md-12">
                <h2>
                    <strong>Modificaciones al presupuesto</strong>
                    municipal de inversiones
                </h2>
                <h4>Millones de c&oacute;rdobas corrientes </h4>
                <hr class="pma-line-3"/>
            </div>
        </div>
        <div class="row">
            <div class="col-md-offset-2 col-md-9">
                <table class="table table-bordered table-condensed table-striped">
                    <thead>
                    <tr class="bg-primary">
                        <th colspan="1" rowspan="2">Rubros de inversi&oacute;n</th>
                        <th colspan="2" rowspan="1" class="text-center no-border-bottom">Inicial</th>
                        <th colspan="2" rowspan="1" class="text-center no-border-bottom">Actualizado</th>
                        <th colspan="2" rowspan="1" class="text-center no-border-bottom">Modificaci&oacute;n</th>
                    </tr>
                    <tr class="bg-primary">
                        <th colspan="1" rowspan="1" class="text-center no-border-top no-border-right">M. de C&oacute;rdobas</th>
                        <th colspan="1" rowspan="1" class="text-center no-border-top no-border-left">%</th>
                        <th colspan="1" rowspan="1" class="text-center no-border-top no-border-right">M. de C&oacute;rdobas</th>
                        <th colspan="1" rowspan="1" class="text-center no-border-top no-border-left">%</th>
                        <th colspan="1" rowspan="1" class="text-center no-border-top no-border-right">M. de C&oacute;rdobas</th>
                        <th colspan="1" rowspan="1" class="text-center no-border-top no-border-left">%</th>
                    </tr>
                    </thead>
                    <tbody>
                    {% for row in cat %}
                        <tr>
                            <td class="text-left">{{ row.catinversion__nombre }}</td>
                            <td class="text-center">{{ row.inicial_asignado|million|intcomma }}</td>
                            <td class="text-center">{{ row.ini_asig_porcentaje }}%</td>
                            <td class="text-center">{{ row.actualizado_asignado|million|intcomma }}</td>
                            <td class="text-center">{{ row.act_porcentaje }}%</td>
                            <td class="text-center">
                                {% if row.final_ejecutado %}
                                    {{ row.final_ejecutado|million|intcomma }}
                                {% else %}
                                    0
                                {% endif %}
                            </td>
                            <td class="text-center">{{ row.ejec_porcentaje }}%</td>
                        </tr>
                    {% endfor %}
                    <tr class="bold">
                        <td>TOTAL</td>
                        <td class="text-center">{{ cat|total_sum:'inicial_asignado'|million|intcomma }}</td>
                        <td class="text-center">{{ asignado_porcentaje }}%</td>
                        <td class="text-center">{{ cat|total_sum:'actualizado_asignado'|million|intcomma }}</td>
                        <td class="text-center">{{ actualizado_porcentaje }}%</td>
                        <td class="text-center">{{ cat|total_sum:'final_ejecutado'|million|intcomma }}</td>
                        <td class="text-center">{{ ejecutado_porcentaje }}%</td>
                    </tr>
                    </tbody>
                    <tfoot class="font-12px font-color-azul">
                    <th colspan="{{ year_list|length }}" rowspan="1" class="text-justify">
                        <strong>Fuente: </strong>Elaboraci&oacute;n
                        propia a partir
                        de transmunic.gob.ni<strong>.</strong></th>
                    </tfoot>
                </table>
            </div>
        </div>
        <div class="container">
            <div class="row">
                <div class="col-md-12 text-center medium">
                    <button id="show-detail-2" class="blanco btn pma-bg-blue more" type="submit">
                        Ver detalles
                    </button>
                </div>
            </div>
        </div>
        <div id="detail-2" class="row">
            <div class="col-md-12">
                <table class="table table-bordered  table-condensed table-striped">
                    <thead>
                    <tr class="bg-primary">
                        <td colspan="2"></td>
                        <td colspan="4" class="text-center">
                            <h4>Modificaci&oacute;n intermedia
                                <a href="#" data-toggle="tooltip"
                                   data-original-title="Modificaci&oacute;n al {{ year_data.actualizado }}"
                                   class="link-info">*</a>
                            </h4>
                        </td>
                        <td colspan="4" class="text-center">
                            <h4>Modificaci&oacute;n al cierre
                                <a href="#" data-toggle="tooltip"
                                   data-original-title="Modificaci&oacute;n al {{ year_data.final }}" class="link-info">*</a>
                            </h4>
                        </td>
                    </tr>
                    <tr class="bg-primary">
                        <th>Rubros de inversi&oacute;n</th>
                        <th>Inicial</th>
                        <th>Actualizado</th>
                        <th>Modificaci&oacute;n</th>
                        <th>Ejecutado</th>
                        <th>
                            <a href="#" data-toggle="tooltip" data-original-title="Ejecutado/Actualizado"
                               class="link-info font-color-white">%</a>
                        </th>
                        <th>Actualizado</th>
                        <th>Modificaci&oacute;n</th>
                        <th>Ejecutado</th>
                        <th><a href="#" data-toggle="tooltip" data-original-title="Ejecutado/Actualizado"
                               class="link-info font-color-white">%</a></th>
                    </tr>
                    </thead>
                    <tbody>
                    {% for row in cat %}
                        <tr>
                            <td class="text-left">{{ row.catinversion__nombre }}</td>
                            <td class="text-right">{{ row.inicial_asignado|million|intcomma }}</td>
                            <td class="text-right">{{ row.actualizado_asignado|million|intcomma }}</td>
                            <td class="text-right">
                                {% if row.actualizado_asignado and row.inicial_asignado %}
                                    {{ row.actualizado_asignado|sub:row.inicial_asignado|million|intcomma }}
                                {% else %}
                                    0
                                {% endif %}
                            </td>
                            <td class="text-right">{{ row.actualizado_ejecutado|million|intcomma }}</td>
                            {% if row.actualizado_asignado %}
                                <td class="montos">{{ row.actualizado_ejecutado|div:row.actualizado_asignado|mul:100|floatformat:1|intcomma }}%</td>
                            {% else %}
                                <td class="montos">0%</td>
                            {% endif %}
                            <td class="text-right">
                                {% if row.final_asignado %}
                                    {{ row.final_asignado|million|intcomma }}
                                {% else %}
                                    0
                                {% endif %}</td>
                            <td class="text-right">
                                {% if row.final_asignado and row.inicial_asignado %}
                                    {{ row.final_asignado|sub:row.inicial_asignado|million|intcomma }}
                                {% else %}
                                    0
                                {% endif %}</td>
                            <td class="text-right">
                                {% if row.final_ejecutado %}
                                    {{ row.final_ejecutado|million|intcomma }}
                                {% else %}
                                    0
                                {% endif %}
                            </td>
                            {% if row.final_asignado %}
                                <td class="danger montos">{{ row.final_ejecutado|div:row.final_asignado|mul:100|floatformat:1|intcomma }}%</td>
                            {% endif %}
                        </tr>
                    {% endfor %}
                    </tbody>
                    <tfoot class="font-12px font-color-azul">
                    <th colspan="{{ year_list|length }}" rowspan="1" class="text-justify">
                        <strong>Fuente: </strong>Elaboraci&oacute;n
                        propia a partir
                        de transmunic.gob.ni<strong>.</strong></th>
                    </tfoot>
                    {% comment %}
                    <tfoot>
                    <tr class="bold">
                        <td>TOTAL</td>
                        <td class="text-right">{{ rubros|total_sum:'inicial_asignado'|million|intcomma }}</td>
                        <td class="text-right">{{ rubros|total_sum:'actualizado_asignado'|million|intcomma }}</td>
                        {% with sum_asignado=rubros|total_sum:'inicial_asignado' %}
                            <td class="montosi text-right">
                                {% if rubros|total_sum:'actualizado_asignado' %}
                                    {{ rubros|total_sum:'actualizado_asignado'|sub:sum_asignado|million|intcomma }}
                                {% else %}
                                    0
                                {% endif %}
                            </td>
                        {% endwith %}
                        <td class="text-right">{{ rubros|total_sum:'actualizado_ejecutado'|million|intcomma }}</td>
                        {% with sum_actualizado=rubros|total_sum:'actualizado_asignado' %}
                            <td class="montos text-right">
                                {% if sum_actualizado %}
                                    {{ rubros|total_sum:'actualizado_ejecutado'|div:sum_actualizado|mul:100|floatformat:1|intcomma }}
                                    %
                                {% endif %}
                            </td>
                        {% endwith %}
                        <!-- totales periodo final -->
                        <td class="text-right">{{ rubros|total_sum:'final_asignado'|million|intcomma }}</td>
                        {% with sum_asignado=rubros|total_sum:'inicial_asignado' %}
                            <td class="montosi text-right">
                                {% if rubros|total_sum:'final_asignado' %}
                                    {{ rubros|total_sum:'final_asignado'|sub:sum_asignado|million|intcomma }}
                                {% else %}
                                    0
                                {% endif %}
                            </td>
                        {% endwith %}
                        <td class="text-right">{{ rubros|total_sum:'final_ejecutado'|million|intcomma }}</td>
                        {% with sum_actualizado=rubros|total_sum:'final_asignado' %}
                            <td class="montos text-right">
                                {% if sum_actualizado %}
                                    {{ rubros|total_sum:'final_ejecutado'|div:sum_actualizado|mul:100|floatformat:1|intcomma }}
                                    %
                                {% endif %}
                            </td>
                        {% endwith %}
                    </tr>
                    </tfoot>
                {% endcomment %}
                </table>
            </div>
        </div>
    </div>
{% endblock %}

{% block section5 %}
    <div class="container">
        <div class="row">
            <div class="col-md-12">
                <h2><strong>Informaci&oacute;n Hist&oacute;rica</strong><br>
                    Comportamiento hist&oacute;rico de las inversiones anuales {% if not municipio %}Consolidado
                        municipal {% endif %} </h2>
                <h4>En millones de c&oacute;rdobas corrientes </h4>
                <hr class="pma-line-3"/>
            </div>
        </div>
    </div>
    <div class="cd-horizontal-timeline loaded historico">
        <div class="timeline container">
            <div class="events-wrapper">
                <div class="events" style="width:{{ anuales|length|add:1|mul:"135" }}px">
                    <ol>
                        {% for row in anuales %}
                            <li>
                                <a href="#0" data-date="01/01/{{ row.inversion__anio }} 00:00"
                                        {% if row.inversion__anio == year|add:"0" %} class="selected" {% endif %}
                                   style="left:{{ forloop.counter|mul:"135" }}px;"><span
                                        class="posicion">{{ row.inversion__anio }}</span>
                                    <br/>
                                    {% if row.inversion__periodo == 'I' %}
                                        <span class="line-cifra">{{ row.asignado|million|intcomma }}</span>
                                    {% else %}
                                        <span class="line-cifra">{{ row.ejecutado|million|intcomma }}</span>
                                    {% endif %}
                                </a>
                            </li>
                        {% endfor %}
                    </ol>
                    <span class="filling-line" aria-hidden="true" style="transform:scaleX(0.8);"></span>
                </div> <!-- .events -->
            </div> <!-- .events-wrapper -->

            <ul class="cd-timeline-navigation">
                <li><a href="#0" class="prev inactive">Prev</a></li>
                <li><a href="#0" class="next">Next</a></li>
            </ul> <!-- .cd-timeline-navigation -->
        </div> <!-- .timeline -->

        <div class="events-content">
            <ol>
                <li data-date="01/01/{{ row.inversion__anio }} 00:00"
                        {% if row.inversion__anio == year|add:"0" %} class="selected" {% endif %}>
                </li>
            </ol>
        </div> <!-- .events-content -->
    </div>
    <div class="container">
        <div class="row">
            <div class="col-md-12 text-center medium">
                <button id="show-detail-3" class="blanco btn pma-bg-blue more" type="submit">
                    Ver detalles en tabla
                </button>
            </div>
        </div>
    </div>
    <div id="detail-3" class="container">
        <div class="row">
            <div class="col-md-12 col-sm-12 col-lg-12 table-responsive">
                <table class="table">
                    <thead>
                    <tr>
                        <th colspan="1" rowspan="2" class="text-center">Categor&iacute;as</th>
                        {% for year in year_list %}
                            <th rowspan="1" colspan="2"
                                class="text-center no-border-bottom border-sides {% if forloop.counter|divisibleby:2 %} background-color-white {% else %} background-color-gray {% endif %}">
                                <strong>{{ year }}</strong>
                                {% if periodo_list|keyvalue:year == 'A' %}*Actualizado*{% endif %}
                            </th>
                        {% endfor %}
                    </tr>
                    <tr>
                        {% for year in year_list %}
                            <th colspan="1"
                                class="no-border-top text-center border-left {% if forloop.counter|divisibleby:2 %} background-color-white {% else %} background-color-gray {% endif %}">
                                M. de C&oacute;rdobas
                            </th>
                            <th colspan="1"
                                class="no-border-top text-center border-right {% if forloop.counter|divisibleby:2 %} background-color-white {% else %} background-color-gray {% endif %}">
                                %
                            </th>
                        {% endfor %}
                    </tr>
                    </thead>
                    <tbody>
                    {% for key, data in porano.items %}
                        <tr>
                            <td class="text-left">{{ key }}</td>
                            {% for year in year_list %}
                                {% with year_data=data|keyvalue:year %}
                                    <td class="text-center {% if forloop.counter|divisibleby:2 %} background-color-white {% else %} background-color-gray {% endif %}">
                                        {{ year_data.raw|million|intcomma }}
                                    </td>
                                    <td class="text-center {% if forloop.counter|divisibleby:2 %} background-color-white {% else %} background-color-gray {% endif %}">
                                        {{ year_data.percent|default:"0%" }}
                                    </td>
                                {% endwith %}
                            {% endfor %}
                        </tr>
                    {% endfor %}
                    </tbody>
                    <tfoot class="font-12px font-color-azul">
                    <th colspan="{{ year_list|length }}" rowspan="1" class="text-justify"><strong>Fuente: </strong>Elaboraci&oacute;n
                        propia a partir
                        de transmunic.gob.ni<strong>.</strong></th>
                    </tfoot>
                </table>
            </div>
        </div>
    </div>
{% endblock %}

{% block custom_scripts %}
    {{ charts|load_charts:"pie,bar,bar_horizontal" }}
{% endblock %}
