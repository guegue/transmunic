{% load core_extras humanize %}
<div class="container-fluid">
    <div class="col-lg-12 col-md-12 col-sm-12" id="greater-middle-lower">
        <div class="row">
            {% if periodo_list|keyvalue:year == 'I' %}
                {% for row in otros|dictsortreversed:'asignado_percent' %}
                    {% if forloop.first and municipio|lower == row.gasto__municipio__nombre|lower or forloop.first and municipio|lower == row.ingreso__municipio__nombre|lower or forloop.first and municipio|lower == row.inversion__municipio__nombre|lower %}
                        <div class="col-lg-12 col-md-12 col-sm-12 first-child">
                            <div class="row">
                                <div class="col-lg-4 col-md-4 col-sm-4 text-center m-0">
                                    Posici&oacute;n
                                    <br>
                                    <span class="font-30px">{{ forloop.counter }}</span>
                                </div>
                                <div class="col-lg-8 col-md-8 col-sm-8 text-right m-0">
                                    <p class="font-17px">
                                        Mi municipio:
                                        <strong>{% firstof row.gasto__municipio__nombre row.ingreso__municipio__nombre row.inversion__municipio__nombre %}</strong>
                                    </p>
                                    <p class="info-box-number">
                                        {{ row.asignado_percent|floatformat:2|intcomma }}
                                        M. de C&oacute;rdobas
                                    </p>
                                </div>
                            </div>
                        </div>
                    {% elif forloop.first %}
                        <div class="col-lg-12 col-md-12 col-sm-12 first-child">
                            <div class="row">
                                <div class="col-lg-6 col-md-6 col-sm-6 text-center m-0">
                                    Posici&oacute;n
                                    <br>
                                    <span class="font-30px">{{ forloop.counter }}</span>
                                </div>
                                <div class="col-lg-6 col-md-6 col-sm-6 text-right m-0">
                                    <p class="font-17px">
                                        {% firstof row.gasto__municipio__nombre row.ingreso__municipio__nombre row.inversion__municipio__nombre %}
                                    </p>
                                    <p class="info-box-number">
                                        {{ row.asignado_percent|floatformat:2|intcomma }}
                                        M. de C&oacute;rdobas
                                    </p>
                                </div>
                            </div>
                        </div>
                    {% elif  municipio|lower == row.gasto__municipio__nombre|lower or municipio|lower == row.ingreso__municipio__nombre|lower or municipio|lower == row.inversion__municipio__nombre|lower %}
                        <div class="col-lg-offset-2 col-md-offset-2 col-sm-offset-2 col-lg-10 col-md-10 col-sm-10 middle-child">
                            <div class="row">
                                <div class="col-lg-5 col-md-5 col-sm-5 text-center m-0">
                                    Posici&oacute;n
                                    <br>
                                    <span class="font-30px">{{ forloop.counter }}</span>
                                </div>
                                <div class="col-lg-7 col-md-7 col-sm-7 text-right m-0">
                                    <p class="font-17px {% if row.gasto__municipio__nombre|length > 21 or row.ingreso__municipio__nombre|length > 21 or row.inversion__municipio__nombre|length > 21 %}mb-0{% endif %}">
                                        Mi municipio:
                                        <strong>{% firstof row.gasto__municipio__nombre row.ingreso__municipio__nombre row.inversion__municipio__nombre %}</strong>
                                    </p>
                                    <p class="info-box-number">
                                        {{ row.asignado_percent|floatformat:2|intcomma }}
                                        M. de C&oacute;rdobas
                                    </p>
                                </div>
                            </div>
                        </div>
                    {% endif %}

                    {% if forloop.last %}
                        <div class="col-lg-offset-5 col-md-offset-5 col-sm-offset-5 col-lg-7 col-md-7 col-sm-7 last-child">
                            <div class="row">
                                <div class="col-lg-5 col-md-5 col-sm-5 text-center m-0">
                                    Posici&oacute;n
                                    <br>
                                    <span class="font-30px">{{ forloop.counter }}</span>
                                </div>
                                <div class="col-lg-7 col-md-7 col-sm-7 text-right m-0">
                                    <p class="font-17px">
                                        {% firstof row.gasto__municipio__nombre row.ingreso__municipio__nombre row.inversion__municipio__nombre %}
                                    </p>
                                    <p class="info-box-number">
                                        {{ row.asignado_percent|floatformat:2|intcomma }}
                                        M. de C&oacute;rdobas
                                    </p>
                                </div>
                            </div>
                        </div>
                    {% endif %}
                {% endfor %}
            {% else %}
                {% for row in otros|dictsortreversed:'ejecutado_percent' %}
                    {% if forloop.first and municipio|lower == row.gasto__municipio__nombre|lower or forloop.first and municipio|lower == row.ingreso__municipio__nombre|lower or forloop.first and municipio|lower == row.inversion__municipio__nombre|lower %}
                        <div class="col-lg-12 col-md-12 col-sm-12 first-child">
                            <div class="row">
                                <div class="col-lg-4 col-md-4 col-sm-4 text-center m-0">
                                    Posici&oacute;n
                                    <br>
                                    <span class="font-30px">{{ forloop.counter }}</span>
                                </div>
                                <div class="col-lg-8 col-md-8 col-sm-8 text-right m-0">
                                    <p class="font-17px {% if row.gasto__municipio__nombre|length > 21 or row.ingreso__municipio__nombre|length > 21 or row.inversion__municipio__nombre|length > 21 %}mb-0{% endif %}">
                                        Mi municipio:
                                        <strong> {% firstof row.gasto__municipio__nombre row.ingreso__municipio__nombre row.inversion__municipio__nombre %}</strong>
                                    </p>
                                    <p class="info-box-number">
                                        {{ row.ejecutado_percent|floatformat:2|intcomma }}
                                        M. de C&oacute;rdobas
                                    </p>
                                </div>
                            </div>
                        </div>
                    {% elif forloop.first %}
                        <div class="col-lg-12 col-md-12 col-sm-12 first-child">
                            <div class="row">
                                <div class="col-lg-6 col-md-6 col-sm-6 text-center m-0">
                                    Posici&oacute;n
                                    <br>
                                    <span class="font-30px">{{ forloop.counter }}</span>
                                </div>
                                <div class="col-lg-6 col-md-6 col-sm-6 text-right m-0">
                                    <p class="font-17px">
                                        {% firstof row.gasto__municipio__nombre row.ingreso__municipio__nombre row.inversion__municipio__nombre %}
                                    </p>
                                    <p class="info-box-number">{{ row.ejecutado_percent|floatformat:2|intcomma }}
                                        M. de C&oacute;rdobas</p>
                                </div>
                            </div>
                        </div>
                    {% elif  municipio|lower == row.gasto__municipio__nombre|lower or municipio|lower == row.ingreso__municipio__nombre|lower or municipio|lower == row.inversion__municipio__nombre|lower %}
                        <div class="col-lg-offset-2 col-md-offset-2 col-sm-offset-2 col-lg-10 col-md-10 col-sm-10 middle-child">
                            <div class="row">
                                <div class="col-lg-5 col-md-5 col-sm-5 text-center m-0">
                                    Posici&oacute;n
                                    <br>
                                    <span class="font-30px">{{ forloop.counter }}</span>
                                </div>
                                <div class="col-lg-7 col-md-7 col-sm-7 text-right m-0">
                                    <p class="font-17px {% if row.gasto__municipio__nombre|length > 21 or row.ingreso__municipio__nombre|length > 21 or row.inversion__municipio__nombre|length > 21 %}mb-0{% endif %}">
                                        Mi municipio:
                                        <strong>{% firstof row.gasto__municipio__nombre row.ingreso__municipio__nombre row.inversion__municipio__nombre %}</strong>
                                    </p>
                                    <p class="info-box-number">{{ row.ejecutado_percent|floatformat:2|intcomma }}
                                        M. de C&oacute;rdobas</p>
                                </div>
                            </div>
                        </div>
                    {% endif %}

                    {% if forloop.last %}
                        <div class="col-lg-offset-5 col-md-offset-5 col-sm-offset-5 col-lg-7 col-md-7 col-sm-7 last-child">
                            <div class="row">
                                <div class="col-lg-5 col-md-5 col-sm-5 text-center m-0">
                                    Posici&oacute;n
                                    <br>
                                    <span class="font-30px">{{ forloop.counter }}</span>
                                </div>
                                <div class="col-lg-7 col-md-7 col-sm-7 text-right m-0">
                                    <p class="font-17px">
                                        {% firstof row.gasto__municipio__nombre row.ingreso__municipio__nombre row.inversion__municipio__nombre %}
                                    </p>
                                    <p class="info-box-number">{{ row.ejecutado_percent|floatformat:2|intcomma }}
                                        M. de C&oacute;rdobas</p>
                                </div>
                            </div>
                        </div>
                    {% endif %}
                {% endfor %}
            {% endif %}

        </div>
    </div>
</div>