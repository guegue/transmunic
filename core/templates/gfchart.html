{% extends "base.html" %}
{% load static thumbnail chartit %}
{% block main_content %}
    <h2 class="title">Gastos de funcionamiento </h2>
    <div id="span12 search">
    <form method="GET">
    <select name="year">
    {% for year in year_list %}
        <option {% if year == request.GET.year|add:"0" %}selected{% endif %} value="{{year}}">{{year}}</option>
    {% endfor %}
    </select>
    <select name="municipio">
    <option value="">--</option>
    {% for municipio in municipio_list %}
        <option {% if municipio.slug == request.GET.municipio %}selected{% endif %} value="{{municipio.slug}}">{{municipio}}</option>
    {% endfor %}
    </select>
    <input type="submit" value="Submit"/>
    </form>
    </div>
    <ul id="gfTab" class="nav nav-tabs" role="tablist">
        <li role="presentation" class="active"><a href="#asignados" aria-controls="asignados" role="tab" data-toggle="tab">Asignado y ejecutado anual</a></li>
        <li role="presentation"><a href="#gfmodificacion" aria-controls="gfmodificacion" role="tab" data-toggle="tab">Modificaciones al presupuesto</a></li>
        <li role="presentation"><a href="#gforigen" aria-controls="gforigen" role="tab" data-toggle="tab">Ingresos ejecutados por origen</a></li>
    </ul>
    <div class="clearfix"></div>
    {% if municipio %}
        {{ charts|load_charts:"gfbar, barra, pie, comparativo2, comparativo3, comparativo_anios, " }}
    {% else %}
        {{ charts|load_charts:"gfbar, barra, pie" }}
    {% endif %}
    <div id="gfTabContent" class="tab-content col-md-12">
      <div role="tabpanel" class="tab-pane fade active in" id="asignados" aria-labelledby="asignados-tab">
        <div id='comparativo_anios'></div>
      </div>
      <div role="tabpanel" class="tab-pane fade active in" id="asignados" aria-labelledby="asignados-tab">
        <div id='comparativo2'></div>
      </div>
      <div role="tabpanel" class="tab-pane fade active in" id="asignados" aria-labelledby="asignados-tab">
        <div id='comparativo3'></div>
      </div>
      <div role="tabpanel" class="tab-pane fade active in" id="asignados" aria-labelledby="asignados-tab">
        <div id='pie'></div>
      </div>
      <div role="tabpanel" class="tab-pane fade" id="gfmodificacion" aria-labelledby="gfmodificacion-tab">
        <div id='barra' class="col-md-10"></div>
      </div>
      <div role="tabpanel" class="tab-pane fade" id="gforigen" aria-labelledby="gforigen-tab">
        <div id='gfbar' class="col-md-10"></div>
      </div>
    </div>
{% endblock %}
<script>
$('#gfTab a').click(function (e) {
  e.preventDefault()
    $(this).tab('show')
    })
</script>
